{% extends 'layout.html' %} {% block title %}Riwayat Pesanan Saya{% endblock %}
{% block content %}
<h2 class="mb-4">Riwayat Pesanan Saya</h2>

{% if pesanan_list %} {% for pesanan in pesanan_list %}
<div class="card shadow-sm mb-3">
  <div
    class="card-header bg-light d-flex justify-content-between align-items-center"
  >
    <div>
      <strong>Kode Booking: {{ pesanan.kode_booking }}</strong>
    </div>

    {% if pesanan.status == 'Menunggu Pembayaran' %}
    <span class="badge kai-bg-orange">{{ pesanan.status }}</span>
    {% else %}
    <span class="badge bg-success">{{ pesanan.status }}</span>
    {% endif %}
  </div>
  <div class="card-body">
    <div class="row">
      <div class="col-md-8">
        <h5 class="card-title">
          {{ pesanan.jadwal.nama_kereta }} ({{ pesanan.jadwal.kelas }})
        </h5>
        <p class="card-text mb-1">
          <strong class="kai-text-blue"
            >{{ pesanan.jadwal.stasiun_asal }}</strong
          >
          &rarr;
          <strong class="kai-text-blue"
            >{{ pesanan.jadwal.stasiun_tujuan }}</strong
          >
        </p>
        <p class="card-text">
          Tanggal Berangkat:
          <strong
            >{{ pesanan.jadwal.waktu_berangkat.strftime('%d %B %Y') }}</strong
          >
        </p>
        <p class="card-text text-muted">
          Dipesan pada: {{ pesanan.tanggal_pesan.strftime('%d-%m-%Y %H:%M') }}
        </p>
      </div>
      <div class="col-md-4 text-md-end">
        {% if pesanan.metode_pembayaran %}
        <p class="mb-1">
          Metode Pembayaran: <strong>{{ pesanan.metode_pembayaran }}</strong>
        </p>
        {% endif %}
        <p class="mb-1">
          Jumlah Tiket: <strong>{{ pesanan.jumlah_tiket }}</strong>
        </p>
        <h5>Total Harga:</h5>
        <h4 class="kai-text-orange">
          Rp {{ "{:,.0f}".format(pesanan.total_harga) }}
        </h4>
      </div>
    </div>
  </div>
</div>
{% endfor %} {% else %}
<div class="alert alert-info" role="alert">
  Anda belum memiliki riwayat pesanan.
  <a href="{{ url_for('index') }}" class="alert-link">Cari tiket sekarang!</a>
</div>
{% endif %} {% endblock %}
